<launch>
  <!-- -->
  <arg name="sim" default="false"/>
  <!-- -->
  <arg name="db" default="false"/>
  <arg name="db_path" default="$(find aubo_i5_moveit_config)/default_warehouse_mongo_db"/>
  <!-- -->
  <arg name="rviz" default="false"/>

  <!-- The planning and execution components of MoveIt! configured to run -->
  <!-- using the ROS-Industrial interface. -->

  <!-- Planning Context-->
  <include file="$(find aubo_i5_moveit_config)/launch/planning_context.launch" >
    <arg     if="$(arg sim)" name="load_robot_description" value="false"/>
    <arg unless="$(arg sim)" name="load_robot_description" value="true"/>
  </include>


  <!-- Launch Drivers -->
  <include file="$(find aubo_driver)/launch/aubo_driver.launch">
    <arg name="hostname" value="192.168.242.241"/>
    <arg name="port" value="8899"/>
  </include>

  <node name="aubo_controller" pkg="aubo_controller" type="aubo_controller" output="screen"/>


  <!-- Robot State Publisher -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
    <rosparam param="source_list">[aubo_driver/joint_states]</rosparam>
  </node>

  <!-- MoveGroup -->
  <include file="$(find aubo_i5_moveit_config)/launch/move_group.launch">
    <arg name="publish_monitored_planning_scene" value="true"/>
  </include>

  <!-- If database loading was enabled, start mongodb as well -->
  <include if="$(arg db)" file="$(find aubo_i5_moveit_config)/launch/default_warehouse_db.launch">
    <arg name="moveit_warehouse_database_path" value="$(arg db_path)"/>
  </include>

  <!-- Rviz -->
  <include if="$(arg rviz)" file="$(find aubo_i5_moveit_config)/launch/moveit_rviz.launch">
    <arg name="config" value="true"/>
  </include>

</launch>
